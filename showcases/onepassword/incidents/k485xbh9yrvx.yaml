version: incident/v1
id: k485xbh9yrvx
name: 1Password service was unavailable
impact: critical
systems:
    - cgltwfnt80mm
    - 44mr9pvxy2h1
    - nb2s2j09f6sc
    - mxh1682h05hp
    - c1hyq57z8lnq
    - 03vs2j75ds22
timeline:
    - ts: "2025-04-22 13:09:50"
      description: We are currently investigating a service disruption affecting our the 1Password web interface. Our engineering team is actively working to identify and resolve the issue.
      investigating: true
    - ts: "2025-04-22 13:26:13"
      description: We are continuing to investigate a service disruption affecting our the 1Password web interface. Our engineering team has restored some services, but some APIs are still returning errors. The engineering team is actively closing in on a root cause.
      investigating: true
    - ts: "2025-04-22 13:36:57"
      description: We have recovered from a service disruption affecting our the 1Password web interface. Our engineering team has restored all services, with some slowness due to inbound traffic spikes as clients reconnect. The engineering team continues to investigate to determine the root cause.
    - ts: "2025-04-22 18:07:58"
      description: We are continuing to monitor for any further issues.
    - ts: "2025-04-22 20:08:28"
      description: This incident has been resolved. Our engineering team  identified the cause of the incident, and made changes to prevent recurrence. We will share more information as soon as it is available.
      resolved: true
    - ts: "2025-04-25 17:44:28"
      description: "**Date of Incident:** 2025-04-22  \n**Time of Incident \\(EST\\):** 8:51am - 9:31am   \n**Service\\(s\\) Affected:** SSO, Web Sign In, Sign Up, Web Interface, CLI   \n**Impact Duration:** 40 minutes\n\n## Summary\n\nOn April 22, 2025 1Password’s web interface and APIs were unavailable for all customers accessing the US region. This was not a result of a security incident and customer data was not affected. The database stopped committing changes to disk, causing queries to fail. As a result, requests to the web interface and to APIs in the region returned with an error.\n\n## Impact on Customers\n\nDuring the duration of the incident:\n\n* **Web interface, Administration:** Customers were unable to log in to the web interface for 1Password. Users already logged in could not use the web application. Administrators were unable to use the administration tools. Users were presented with the error “upstream connect error or disconnect/reset before headers. reset reason: overflow.”\n* **Single Sign-on \\(SSO\\), Multi-factor Authentication \\(MFA\\):** Users on accounts with SSO or MFA enabled were unable to sign in and were presented with the error above, or “An unexpected error occurred.”\n* **Command Line Interface \\(CLI\\):** CLI users received the above errors when accessing our web APIs.\n* **Browser Extension:** Users who needed to authenticate via the web interface were unable to unlock their vaults.\n\n## Scope\n\n* All users accessing services in the US/Global \\(non-Canada and non-EU\\) region were affected.\n\n## What Happened?\n\nA problem with database infrastructure prevented services from reading or writing data. There were no recent changes to the infrastructure, but additional load from multiple operations contributed to the issue.\n\n* **Timeline of Events:**\n\n    * **2025-04-22 08:51 AM ET**: Database performance began to degrade.\n    * **2025-04-22 08:54 AM ET**: Automation detected the issue, and circuit broke requests to the database. The web app began returning errors. The system raised alerts.\n    * **2025-04-22 08:58 AM ET**: Incident team began investigating.\n    * **2025-04-22 09:18 AM ET**: Issue was identified.\n    * **2025-04-22 09:25 AM ET**: Database connections were reset to enable recovery.\n    * **2025-04-22 09:31 AM ET**: Monitors confirmed service was restored and database was operating normally.\n    \n* **Root Cause Analysis:** The database stopped writing data to its underlying data store. We are continuing to investigate the cause of this fault.\n\n    * **Update 2025-05-08**: Our investigation concluded that a long-running query combined with a routine database migration blocked reads and writes to a table required for all subsequent queries. During the migration, an internal lock occurred that was not visible to our monitoring systems. This lock prevented database operations from proceeding until the initial long-running query was interrupted.\n    \n* **Contributing Factors:**\n\n    * The incident happened during the peak of daily traffic.\n    * Two subsystems were running database operations during or just before the incident.\n    \n\n## How Was It Resolved?\n\n* **Mitigation Steps:** We halted non-critical processes to reduce load on the database.\n* **Resolution Steps:** All database connections were routed to a healthy replica. This restored service.\n* **Verification of Resolution:** Monitoring systems were closely observed for 1 hour to ensure error rates returned to normal.\n\n## What We Are Doing to Prevent Future Incidents\n\n* **Improving monitors:** We are updating our monitoring systems to better detect database issues like this before they can impact customers.\n* **Improve database performance:** We are tuning queries and refactoring services to improve performance and reduce load on the database.\n* **Review database configuration:** We are reviewing database size and configuration to optimize performance and enhance monitoring capabilities.\n* **Updates 2025-05-08**\n\n    * We tuned the database table involved to reduce the duration of the problematic query.\n    * We updated the application running the query use a read replica instead of the primary database.\n    * We modified the application to run the query during off-peak hours.\n    \n\n## Next Steps\n\n* No action is needed from customers\n\nWe are committed to providing a reliable and stable service, and we are taking the necessary steps to learn from this event and prevent it from happening again. Thank you for your understanding.\n\nSincerely,\n\nThe 1Password Team"
