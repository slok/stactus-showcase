version: incident/v1
id: skmqnpynxyqs
name: Incident with Pull Requests
impact: minor
systems:
    - hhtssxt0f5v2
timeline:
    - ts: "2025-08-05 17:53:22"
      description: We are investigating reports of degraded performance for Pull Requests
      investigating: true
    - ts: "2025-08-05 18:07:23"
      description: We're seeing issues related to PR are investigating. Less than 2% of users are impacted.
      investigating: true
    - ts: "2025-08-05 18:23:07"
      description: We continue to investigate issues with PRs impacting less than 2% of customers.
      investigating: true
    - ts: "2025-08-05 18:49:04"
      description: We continue to investigate issues with PRs impacting less than 2% of customers.
      investigating: true
    - ts: "2025-08-05 19:20:50"
      description: We continue to investigate issues with PRs. Impact remains limited to less than 2% of users.
      investigating: true
    - ts: "2025-08-05 19:46:39"
      description: Pull Requests is operating normally.
      investigating: true
    - ts: "2025-08-05 19:46:42"
      description: At 15:33 UTC on August 5, 2025, we initiated a production database migration to drop a column from a table backing pull request functionality. While the column was no longer in direct use, our ORM continued to reference the dropped column in a subset of pull request queries. As a result, there were elevated error rates across pushes, webhooks, notifications, and pull requests with impact peaking at approximately 4% of all web and REST API traffic. <br /><br />We mitigated the issue by deploying a change that instructed the ORM to ignore the removed column. Most affected services recovered by 16:13 UTC. However, that fix was applied only to our largest production environment. An update to some of our custom and canary environments did not pick up the fix and this triggered a secondary incident affecting ~0.1% of pull request traffic, which was fully resolved by 19:45 UTC.<br /><br />While migrations have protections such as progressive roll-out first targeting validation environments and acknowledge gates, this incident identified an application monitoring gap that would have prevented continued rollout when impact was observed. We will add additional automation and safeguards to prevent future incidents without requiring human intervention. We are also already working on a way to streamline some types of changes across environments, which would have prevented the second incident from occurring.
      resolved: true
